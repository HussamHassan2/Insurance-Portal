<div class="h-screen bg-gray-50 dark:bg-gray-900 flex overflow-hidden transition-colors duration-300">
    <!-- Mobile Sidebar Overlay -->
    <div *ngIf="isSidebarOpen" class="fixed inset-0 bg-black/50 z-40 lg:hidden" (click)="closeSidebar()"></div>

    <!-- Sidebar -->
    <aside *ngIf="clientId !== 'wataniya'" [ngClass]="{
    'fixed lg:static inset-y-0 left-0 z-50 text-white transition-all duration-300 transform flex flex-col h-full shadow-2xl': true,
    'translate-x-0': isSidebarOpen,
    '-translate-x-full lg:translate-x-0': !isSidebarOpen,
    'w-20': isCollapsed,
    'w-64': !isCollapsed
  }" style="background: linear-gradient(to bottom, #0D1B2A 0%, #1B263B 50%, #0D1B2A 100%);">

        <!-- Logo Section -->
        <div
            class="h-16 flex items-center px-4 border-b border-white/10 justify-between bg-white/5 backdrop-blur-sm shrink-0 relative overflow-hidden group">
            <!-- Animated background gradient -->
            <div
                class="absolute inset-0 bg-gradient-to-r from-primary/10 via-transparent to-primary/10 opacity-0 group-hover:opacity-100 transition-opacity duration-500">
            </div>

            <a [routerLink]="getDashboardPath()" (click)="handleLogoClick($event)"
                [ngClass]="{'flex items-center gap-2 overflow-hidden relative z-10 transition-all duration-300': true, 'justify-center w-full': isCollapsed}">
                <img src="assets/logo.png" alt="Orient Insurance"
                    class="h-8 object-contain transition-transform duration-300 hover:scale-110" />
            </a>

            <!-- Mobile close button -->
            <button (click)="closeSidebar()"
                class="lg:hidden p-1.5 rounded-lg text-blue-200 hover:bg-white/10 hover:text-white transition-all duration-200 hover:rotate-90">
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none"
                    stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                    class="h-5 w-5">
                    <path d="M18 6 6 18"></path>
                    <path d="m6 6 12 12"></path>
                </svg>
            </button>
        </div>

        <!-- Navigation -->
        <nav class="flex-1 px-3 py-6 space-y-1 overflow-y-auto overflow-x-hidden custom-scrollbar">

            <ng-template #iconTemplate let-item="item">
                <svg *ngIf="item.icon === 'layout-dashboard'" xmlns="http://www.w3.org/2000/svg" width="20" height="20"
                    viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                    stroke-linejoin="round">
                    <rect width="7" height="9" x="3" y="3" rx="1"></rect>
                    <rect width="7" height="5" x="14" y="3" rx="1"></rect>
                    <rect width="7" height="9" x="14" y="12" rx="1"></rect>
                    <rect width="7" height="5" x="3" y="16" rx="1"></rect>
                </svg>
                <svg *ngIf="item.icon === 'shield'" xmlns="http://www.w3.org/2000/svg" width="20" height="20"
                    viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                    stroke-linejoin="round">
                    <path
                        d="M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z">
                    </path>
                </svg>
                <svg *ngIf="item.icon === 'file-text'" xmlns="http://www.w3.org/2000/svg" width="20" height="20"
                    viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                    stroke-linejoin="round">
                    <path d="M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z"></path>
                    <path d="M14 2v4a2 2 0 0 0 2 2h4"></path>
                    <path d="M10 9H8"></path>
                    <path d="M16 13H8"></path>
                    <path d="M16 17H8"></path>
                </svg>
                <svg *ngIf="item.icon === 'users'" xmlns="http://www.w3.org/2000/svg" width="20" height="20"
                    viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                    stroke-linejoin="round">
                    <path d="M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"></path>
                    <circle cx="9" cy="7" r="4"></circle>
                    <path d="M22 21v-2a4 4 0 0 0-3-3.87"></path>
                    <path d="M16 3.13a4 4 0 0 1 0 7.75"></path>
                </svg>
                <svg *ngIf="item.icon === 'credit-card'" xmlns="http://www.w3.org/2000/svg" width="20" height="20"
                    viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                    stroke-linejoin="round">
                    <rect width="20" height="14" x="2" y="5" rx="2"></rect>
                    <line x1="2" x2="22" y1="10" y2="10"></line>
                </svg>
                <svg *ngIf="item.icon === 'scroll-text'" xmlns="http://www.w3.org/2000/svg" width="20" height="20"
                    viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                    stroke-linejoin="round">
                    <path d="M15 12h-5"></path>
                    <path d="M15 8h-5"></path>
                    <path d="M19 17V5a2 2 0 0 0-2-2H4"></path>
                    <path
                        d="M8 21h12a2 2 0 0 0 2-2v-1a1 1 0 0 0-1-1H11a1 1 0 0 0-1 1v1a2 2 0 1 1-4 0V5a2 2 0 1 0-4 0v2a1 1 0 0 0 1 1h3">
                    </path>
                </svg>
                <svg *ngIf="item.icon === 'pie-chart'" xmlns="http://www.w3.org/2000/svg" width="20" height="20"
                    viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                    stroke-linejoin="round">
                    <path
                        d="M21 12c.552 0 1.005-.449.95-.998a10 10 0 0 0-8.953-8.951c-.55-.055-.998.398-.998.95v8a1 1 0 0 0 1 1z">
                    </path>
                    <path d="M21.21 15.89A10 10 0 1 1 8 2.83"></path>
                </svg>
                <svg *ngIf="item.icon === 'bar-chart-3'" xmlns="http://www.w3.org/2000/svg" width="20" height="20"
                    viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                    stroke-linejoin="round">
                    <path d="M3 3v16a2 2 0 0 0 2 2h16"></path>
                    <path d="M18 17V9"></path>
                    <path d="M13 17V5"></path>
                    <path d="M8 17v-3"></path>
                </svg>
                <svg *ngIf="item.icon === 'settings'" xmlns="http://www.w3.org/2000/svg" width="20" height="20"
                    viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                    stroke-linejoin="round">
                    <path
                        d="M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z">
                    </path>
                    <circle cx="12" cy="12" r="3"></circle>
                </svg>
                <svg *ngIf="item.icon === 'help-circle'" xmlns="http://www.w3.org/2000/svg" width="20" height="20"
                    viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                    stroke-linejoin="round">
                    <circle cx="12" cy="12" r="10"></circle>
                    <path d="M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"></path>
                    <path d="M12 17h.01"></path>
                </svg>
                <svg *ngIf="item.icon === 'clock'" xmlns="http://www.w3.org/2000/svg" width="20" height="20"
                    viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                    stroke-linejoin="round">
                    <circle cx="12" cy="12" r="10"></circle>
                    <polyline points="12 6 12 12 16 14"></polyline>
                </svg>
                <svg *ngIf="item.icon === 'refresh-cw'" xmlns="http://www.w3.org/2000/svg" width="20" height="20"
                    viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                    stroke-linejoin="round">
                    <path d="M21 2v6h-6"></path>
                    <path d="M3 12a9 9 0 0 1 15-6.7L21 8"></path>
                    <path d="M3 22v-6h6"></path>
                    <path d="M21 12a9 9 0 0 1-15 6.7L3 16"></path>
                </svg>
                <svg *ngIf="item.icon === 'list'" xmlns="http://www.w3.org/2000/svg" width="20" height="20"
                    viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                    stroke-linejoin="round">
                    <line x1="8" x2="21" y1="6" y2="6" />
                    <line x1="8" x2="21" y1="12" y2="12" />
                    <line x1="8" x2="21" y1="18" y2="18" />
                    <line x1="3" x2="3.01" y1="6" y2="6" />
                    <line x1="3" x2="3.01" y1="12" y2="12" />
                    <line x1="3" x2="3.01" y1="18" y2="18" />
                </svg>
                <svg *ngIf="item.icon === 'edit'" xmlns="http://www.w3.org/2000/svg" width="20" height="20"
                    viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                    stroke-linejoin="round">
                    <path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"></path>
                    <path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"></path>
                </svg>
                <svg *ngIf="item.icon === 'x-circle'" xmlns="http://www.w3.org/2000/svg" width="20" height="20"
                    viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                    stroke-linejoin="round">
                    <circle cx="12" cy="12" r="10"></circle>
                    <line x1="15" y1="9" x2="9" y2="15"></line>
                    <line x1="9" y1="9" x2="15" y2="15"></line>
                </svg>
                <svg *ngIf="item.icon === 'clipboard-list'" xmlns="http://www.w3.org/2000/svg" width="20" height="20"
                    viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                    stroke-linejoin="round">
                    <rect width="8" height="4" x="8" y="2" rx="1" ry="1"></rect>
                    <path d="M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"></path>
                    <path d="M12 11h4"></path>
                    <path d="M12 16h4"></path>
                    <path d="M8 11h.01"></path>
                    <path d="M8 16h.01"></path>
                </svg>
                <svg *ngIf="item.icon === 'play-circle'" xmlns="http://www.w3.org/2000/svg" width="20" height="20"
                    viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                    stroke-linejoin="round">
                    <circle cx="12" cy="12" r="10"></circle>
                    <polygon points="10 8 16 12 10 16 10 8"></polygon>
                </svg>
                <svg *ngIf="item.icon === 'pause-circle'" xmlns="http://www.w3.org/2000/svg" width="20" height="20"
                    viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                    stroke-linejoin="round">
                    <circle cx="12" cy="12" r="10"></circle>
                    <line x1="10" x2="10" y1="15" y2="9"></line>
                    <line x1="14" x2="14" y1="15" y2="9"></line>
                </svg>
                <!-- End of Icons -->
            </ng-template>

            <ng-container *ngFor="let item of navItems; let i = index">

                <!-- IF NO CHILDREN -->
                <a *ngIf="!item.children" [routerLink]="item.path" [routerLinkActive]="'active-link'" [ngClass]="{
           'flex items-center gap-3 px-3 py-2.5 rounded-xl text-sm font-medium transition-all duration-300 relative group overflow-hidden': true,
           'bg-gradient-to-r from-primary to-primary-dark text-white shadow-lg shadow-primary/30 scale-105': isActive(item.path),
           'text-blue-100 hover:bg-white/10 hover:text-white hover:scale-105 hover:shadow-md': !isActive(item.path),
           'justify-center': isCollapsed
         }" [style.animation-delay]="(i * 50) + 'ms'" style="animation: fadeInSlide 0.4s ease-out forwards"
                    [title]="isCollapsed ? (item.name | translate) : ''">

                    <div *ngIf="isActive(item.path)"
                        class="absolute left-0 top-1/2 -translate-y-1/2 w-1 h-8 bg-white rounded-r-full animate-slideInLeft">
                    </div>

                    <div
                        class="absolute inset-0 bg-gradient-to-r from-white/5 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300">
                    </div>

                    <span [ngClass]="{
          'h-5 w-5 shrink-0 relative z-10 transition-all duration-300': true,
          'text-white': isActive(item.path),
          'text-blue-200 group-hover:text-white group-hover:scale-110 group-hover:rotate-12': !isActive(item.path)
        }">
                        <ng-container *ngTemplateOutlet="iconTemplate; context: {item: item}"></ng-container>
                    </span>

                    <span *ngIf="!isCollapsed"
                        class="truncate relative z-10 transition-all duration-300 group-hover:translate-x-1">
                        {{ item.name | translate }}
                    </span>

                    <div *ngIf="isCollapsed"
                        class="absolute left-full ml-3 px-3 py-2 bg-gray-900 text-white text-xs rounded-lg opacity-0 group-hover:opacity-100 pointer-events-none whitespace-nowrap z-50 transition-all duration-200 shadow-xl border border-white/10">
                        {{ item.name | translate }}
                        <div
                            class="absolute right-full top-1/2 -translate-y-1/2 border-4 border-transparent border-r-gray-900">
                        </div>
                    </div>
                </a>

                <!-- IF CHILDREN -->
                <div *ngIf="item.children" class="flex flex-col mb-1"
                    style="animation: fadeInSlide 0.4s ease-out forwards" [style.animation-delay]="(i * 50) + 'ms'">
                    <div (click)="toggleSubmenu(item)" (mouseenter)="onMouseEnter(item, $event)"
                        (mouseleave)="onMouseLeave(item)" [ngClass]="{
                            'flex items-center gap-3 px-3 py-2.5 rounded-xl text-sm font-medium transition-all duration-300 relative group overflow-hidden cursor-pointer': true,
                            'text-blue-100 hover:bg-white/10 hover:text-white': true,
                            'bg-white/5': item.expanded,
                            'justify-center': isCollapsed
                        }" [title]="isCollapsed ? (item.name | translate) : ''">

                        <div
                            class="absolute inset-0 bg-gradient-to-r from-white/5 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300">
                        </div>

                        <span [ngClass]="{
                                'h-5 w-5 shrink-0 relative z-10 transition-all duration-300': true,
                                'text-blue-200 group-hover:text-white group-hover:scale-110 group-hover:rotate-12': true
                            }">
                            <ng-container *ngTemplateOutlet="iconTemplate; context: {item: item}"></ng-container>
                        </span>

                        <span *ngIf="!isCollapsed"
                            class="flex-1 truncate relative z-10 transition-all duration-300 group-hover:translate-x-1">
                            {{ item.name | translate }}
                        </span>

                        <svg *ngIf="!isCollapsed" xmlns="http://www.w3.org/2000/svg" width="16" height="16"
                            viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                            stroke-linecap="round" stroke-linejoin="round"
                            class="transition-transform duration-200 text-blue-300" [class.rotate-90]="item.expanded">
                            <polyline points="9 18 15 12 9 6"></polyline>
                        </svg>

                        <!-- Floating Submenu for Collapsed State -->
                        <div *ngIf="isCollapsed"
                            class="fixed left-20 ml-2 min-w-[200px] bg-slate-900 rounded-xl shadow-xl border border-white/10 transition-all duration-200 z-[9999] overflow-hidden"
                            [style.top.px]="flyoutTop" [class.opacity-100]="hoveredItem === item"
                            [class.opacity-0]="hoveredItem !== item" [class.pointer-events-auto]="hoveredItem === item"
                            [class.pointer-events-none]="hoveredItem !== item">
                            <!-- Arrow -->
                            <div
                                class="absolute right-full top-3 -translate-y-1/2 border-8 border-transparent border-r-slate-900">
                            </div>

                            <!-- Header -->
                            <div class="bg-white/5 px-4 py-3 border-b border-white/10">
                                <span class="font-medium text-white">{{ item.name | translate }}</span>
                            </div>

                            <!-- Items -->
                            <div class="py-2">
                                <a *ngFor="let child of item.children" [routerLink]="child.path"
                                    [routerLinkActive]="'active-link'" (click)="onSubmenuItemClick(item, child)"
                                    class="flex items-center gap-3 px-4 py-2.5 text-sm transition-colors hover:bg-white/10 group/item">

                                    <span *ngIf="child.icon"
                                        class="w-4 h-4 text-blue-300 group-hover/item:text-white transition-colors">
                                        <ng-container
                                            *ngTemplateOutlet="iconTemplate; context: {item: child}"></ng-container>
                                    </span>
                                    <span *ngIf="!child.icon"
                                        class="w-1.5 h-1.5 rounded-full bg-blue-400 group-hover/item:bg-white"></span>

                                    <span class="text-blue-100 group-hover/item:text-white">{{ child.name | translate
                                        }}</span>
                                </a>
                            </div>
                        </div>
                    </div>

                    <!-- Children List -->
                    <div *ngIf="item.expanded && !isCollapsed"
                        class="mt-1 ml-4 pl-3 border-l border-white/10 space-y-1">
                        <a *ngFor="let child of item.children" [routerLink]="child.path"
                            [routerLinkActive]="'active-link'"
                            class="flex items-center gap-2 px-3 py-2 rounded-lg text-sm transition-all duration-200 relative group overflow-hidden opacity-90 hover:opacity-100"
                            [ngClass]="isActive(child.path) ? 'text-white font-medium bg-white/10' : 'text-blue-300 hover:text-white hover:bg-white/5'">

                            <span *ngIf="child.icon"
                                class="w-4 h-4 shrink-0 transition-transform group-hover:scale-110">
                                <ng-container *ngTemplateOutlet="iconTemplate; context: {item: child}"></ng-container>
                            </span>
                            <span *ngIf="!child.icon" class="w-1.5 h-1.5 rounded-full"
                                [class.bg-white]="isActive(child.path)"
                                [class.bg-blue-400]="!isActive(child.path)"></span>

                            <span class="truncate">{{ child.name | translate }}</span>
                        </a>
                    </div>
                </div>

            </ng-container>
        </nav>

        <!-- Collapse Toggle (Desktop) -->
        <div class="hidden lg:flex justify-center px-4 py-3 shrink-0 border-t border-white/10">
            <button (click)="toggleCollapse()"
                class="p-2 rounded-xl text-blue-200 hover:bg-white/10 hover:text-white transition-all duration-300 hover:scale-110 group relative overflow-hidden">
                <div
                    class="absolute inset-0 bg-gradient-to-r from-primary/20 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300">
                </div>
                <div
                    [ngClass]="{'transition-transform duration-300': true, 'rotate-0': isCollapsed, 'rotate-180': !isCollapsed}">
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none"
                        stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                        class="h-5 w-5 relative z-10">
                        <path d="m15 18-6-6 6-6"></path>
                    </svg>
                </div>
            </button>
        </div>

        <!-- Sign Out Button -->
        <div class="p-4 border-t border-white/10 bg-white/5 backdrop-blur-sm shrink-0 relative overflow-hidden group">
            <!-- Animated background -->
            <div
                class="absolute inset-0 bg-gradient-to-r from-red-500/10 via-transparent to-red-500/10 opacity-0 group-hover:opacity-100 transition-opacity duration-500">
            </div>

            <button (click)="handleLogout()" [ngClass]="{
                'w-full flex items-center gap-2 px-3 py-2.5 text-sm font-medium text-red-300 hover:bg-red-500/20 hover:text-red-100 rounded-xl transition-all duration-300 relative z-10 group/btn overflow-hidden hover:scale-105 hover:shadow-lg': true,
                'justify-center': isCollapsed
              }" [title]="isCollapsed ? ('APP.LOGOUT' | translate) : ''">
                <div
                    class="absolute inset-0 bg-gradient-to-r from-red-500/10 to-transparent opacity-0 group-hover/btn:opacity-100 transition-opacity duration-300">
                </div>
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none"
                    stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                    class="h-4 w-4 shrink-0 relative z-10 transition-transform duration-300 group-hover/btn:rotate-12">
                    <path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"></path>
                    <polyline points="16 17 21 12 16 7"></polyline>
                    <line x1="21" x2="9" y1="12" y2="12"></line>
                </svg>
                <span *ngIf="!isCollapsed"
                    class="relative z-10 transition-all duration-300 group-hover/btn:translate-x-1">{{
                    'APP.LOGOUT' | translate }}</span>
            </button>
        </div>
    </aside>

    <!-- Main Content Area -->
    <div class="flex-1 flex flex-col min-w-0 h-full overflow-hidden">
        <!-- Header -->
        <header
            class="bg-white dark:bg-gray-800 shadow-sm h-16 flex items-center justify-between px-4 sm:px-6 lg:px-8 shrink-0 z-30 relative transition-colors duration-300">
            <button (click)="toggleSidebar()" *ngIf="clientId !== 'wataniya'"
                class="lg:hidden text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
                    stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                    class="h-6 w-6">
                    <line x1="4" x2="20" y1="12" y2="12"></line>
                    <line x1="4" x2="20" y1="6" y2="6"></line>
                    <line x1="4" x2="20" y1="18" y2="18"></line>
                </svg>
            </button>

            <!-- Wataniya Header Navigation -->
            <div *ngIf="clientId === 'wataniya'" class="flex items-center gap-6 mr-auto">
                <div class="flex items-center gap-2">
                    <img src="assets/logo.png" alt="Wataniya Insurance" class="h-10 object-contain" />
                </div>

                <nav class="hidden lg:flex items-center gap-1">
                    <ng-container *ngFor="let item of navItems">
                        <!-- Single Link -->
                        <a *ngIf="!item.children" [routerLink]="item.path" routerLinkActive="text-primary bg-primary/5"
                            class="px-3 py-2 text-sm font-medium text-gray-600 dark:text-gray-300 hover:text-primary transition-colors rounded-lg flex items-center gap-2">
                            <span>{{ item.name | translate }}</span>
                        </a>

                        <!-- Dropdown -->
                        <div *ngIf="item.children" class="relative group">
                            <button
                                class="px-3 py-2 text-sm font-medium text-gray-600 dark:text-gray-300 hover:text-primary transition-colors rounded-lg flex items-center gap-1 group-hover:text-primary">
                                <span>{{ item.name | translate }}</span>
                                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24"
                                    fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                    stroke-linejoin="round"
                                    class="transition-transform duration-200 group-hover:rotate-180">
                                    <polyline points="6 9 12 15 18 9"></polyline>
                                </svg>
                            </button>

                            <!-- Dropdown Menu -->
                            <div
                                class="absolute top-full left-0 mt-1 w-48 bg-white dark:bg-gray-800 rounded-lg shadow-lg border border-gray-100 dark:border-gray-700 py-1 opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 z-50">
                                <a *ngFor="let child of item.children" [routerLink]="child.path"
                                    routerLinkActive="bg-gray-50 dark:bg-gray-700 text-primary"
                                    class="block px-4 py-2 text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-700 hover:text-primary transition-colors">
                                    {{ child.name | translate }}
                                </a>
                            </div>
                        </div>
                    </ng-container>
                </nav>
            </div>

            <div class="flex items-center gap-4 ml-auto relative">
                <!-- Notification Icon -->
                <button class="p-2 text-gray-400 hover:text-primary transition-colors relative"
                    (click)="toggleNotifications()">
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none"
                        stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                        class="h-5 w-5">
                        <path d="M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9"></path>
                        <path d="M10.3 21a1.94 1.94 0 0 0 3.4 0"></path>
                    </svg>
                    <span class="absolute top-1.5 right-1.5 h-2 w-2 bg-red-500 rounded-full animate-pulse"></span>
                </button>

                <div class="h-8 w-px bg-gray-200 dark:bg-gray-700 mx-2"></div>

                <!-- User Profile Dropdown -->
                <div class="relative">
                    <button (click)="toggleUserMenu()"
                        class="flex items-center gap-2 hover:opacity-80 transition-opacity">
                        <img [src]="getUserAvatar()" [alt]="user?.name" class="h-8 w-8 rounded-full bg-primary" />
                        <div class="hidden md:block text-left">
                            <p class="text-sm font-medium text-gray-700 dark:text-gray-300">{{ user?.name }}</p>
                            <p class="text-xs text-gray-500 dark:text-gray-400 capitalize">{{ user?.role }}</p>
                        </div>
                    </button>

                    <!-- Dropdown Menu -->
                    <div *ngIf="isUserMenuOpen">
                        <div class="fixed inset-0 z-10" (click)="toggleUserMenu()"></div>
                        <div
                            class="absolute right-0 mt-2 w-48 bg-white dark:bg-gray-800 rounded-lg shadow-lg border border-gray-200 dark:border-gray-700 py-1 z-20">
                            <a routerLink="profile" (click)="toggleUserMenu()"
                                class="flex items-center gap-2 px-4 py-2 text-sm text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors">
                                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24"
                                    fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                    stroke-linejoin="round" class="h-4 w-4">
                                    <path d="M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2"></path>
                                    <circle cx="12" cy="7" r="4"></circle>
                                </svg>
                                {{ 'APP.PROFILE' | translate }}
                            </a>
                            <button (click)="handleLogout(); toggleUserMenu()"
                                class="w-full flex items-center gap-2 px-4 py-2 text-sm text-red-600 dark:text-red-400 hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors">
                                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24"
                                    fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                    stroke-linejoin="round" class="h-4 w-4">
                                    <path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"></path>
                                    <polyline points="16 17 21 12 16 7"></polyline>
                                    <line x1="21" x2="9" y1="12" y2="12"></line>
                                </svg>
                                {{ 'APP.LOGOUT' | translate }}
                            </button>
                        </div>
                    </div>
                </div>

                <div class="h-8 w-px bg-gray-200 dark:bg-gray-700 mx-2"></div>

                <div class="flex items-center gap-2">
                    <span class="text-sm font-medium text-gray-700 dark:text-gray-300 hidden sm:block">
                        {{ getCurrentDate() }}
                    </span>
                </div>
            </div>
        </header>

        <!-- Page Content -->
        <main
            class="flex-1 p-4 sm:p-6 lg:p-8 overflow-y-auto scroll-smooth bg-gray-50 dark:bg-gray-900 transition-colors duration-300">
            <ng-content></ng-content>
        </main>
    </div>
</div>